import{d as y,r as f,w as A,o as w,c as I,a as t,b as O,e as q,f as z,g as J,n as C,u as X,p as P,h as R,i as E}from"./index.8b59eddf.js";import{_ as b}from"./plugin-vueexport-helper.2444895f.js";const x=24,Y=1500,B=20,j=10;function K(s){const n=s.getContext("2d"),i=s.height,o=i/2,d=s.width,_=d/2,v=[];let a=Date.now(),e=0,u;function h(c,r){c=(c-_)/_*3,r=(r-o)/o*-3;const l=c*c,p=r*r;return Math.pow(l+p-1,3)-l*(p*r)<0}function g(c,r){let l=0,p=r;do c/=p,p+=r,l+=c*Math.random();while(c>=1);return l}function F(){let c=_,r=o;const l=~~g(x,2.4);let p=(x+B-l)/2-Math.random()*(x+B-l),S=(x+B-l)/2-Math.random()*(x+B-l),$=c,k=r,T,D,G;const N=.05*l;return{draw(){T=~~(255*(c/d)),D=~~(255*(1-r/i)),G=~~(255-T),n.fillStyle="rgba("+T+","+D+","+G+","+N+")",n.beginPath(),n.arc(c,r,l,0,Math.PI*2,!0),n.closePath(),n.fill()},move(H){if($+=p*H,k+=S*H,!h($,k)){if(!h($,r)){p*=-1;return}if(!h(c,k)){S*=-1;return}p=-1*S,S=-1*p;return}c=$,r=k}}}function L(){const c=v.length,r=Y-c;for(let l=0;l<r&&l<j;l++)v.push(F());e=Date.now(),u=a-e,u/=1e3,a=e,v.forEach(function(l){l.move(u)})}function M(){n.clearRect(0,0,d,i),v.forEach(function(c){c.draw()}),requestAnimationFrame(M)}setInterval(L,16),M()}const Q={class:"love-cover"},U=y({__name:"LoveCover",setup(s){const n=f();return A(()=>{const i=n.value;!i||K(i)}),(i,o)=>(w(),I("div",Q,[t("canvas",{ref_key:"canvasRef",ref:n,width:480,height:480},null,512)]))}});const W=b(U,[["__scopeId","data-v-e6b56100"]]),m=s=>(P("data-v-d05c03a3"),s=s(),R(),s),Z={class:"wrap"},ee=m(()=>t("p",null,"Hi birthday person,",-1)),te=m(()=>t("p",null,"Congratulations with your xxth birthday!",-1)),se=m(()=>t("p",null," I hope you'll have a splendid day. Lorem ipsum dolor sit amet consectetur adipiscing elit. ",-1)),oe=m(()=>t("p",null," Maecenas sed elit id elit molestie fringilla. Vivamus urna elit, bibendum vel congue ullamcorper, interdum ut turpis. ",-1)),ne=m(()=>t("p",null," Praesent porta magna et scelerisque egestas. Donec ullamcorper dolor vitae tempor volutpat. ",-1)),ae=m(()=>t("p",{class:"signed"},"Micha\xEBl",-1)),ce={class:"wrap"},le=m(()=>t("h1",null,"Angie & Jay",-1)),ie=m(()=>t("h1",null,"4th",-1)),ue=y({__name:"Card",emits:["show-gift"],setup(s,{emit:n}){const i=f(!1),o=f("fully"),d=O(()=>`${i.value?"open":"close"}-${o.value}`),_=e=>{o.value==="fully"&&(i.value=e)},v=()=>_(!0),a=()=>_(!1);return q(i,(e,u,h)=>{o.value="half";const g=window.setTimeout(()=>{o.value="fully"},1e3);h(()=>{window.clearTimeout(g)})}),(e,u)=>(w(),I("div",{class:C(["card",X(d)])},[t("div",{class:"content",onClick:a},[t("div",Z,[ee,te,se,oe,ne,ae,t("button",{onClick:u[0]||(u[0]=z(h=>n("show-gift"),["stop"]))},"\u9818\u53D6\u79AE\u7269")])]),t("div",{class:"cover",onClick:v},[t("div",ce,[J(W),le,ie])])],2))}});const re=b(ue,[["__scopeId","data-v-d05c03a3"]]),V=s=>(P("data-v-6cde0240"),s=s(),R(),s),_e=V(()=>t("div",{class:"cover"},[t("div")],-1)),de=V(()=>t("div",{class:"box"},null,-1)),ve=[_e,de],fe=y({__name:"Gift",emits:["opened"],setup(s,{emit:n}){const i=f(),o=f(0),d=[1500,600];let _=!1;const v=()=>{_||(_=!0,a())},a=()=>{const e=o.value,u=e+1;u<3?(o.value=u,window.setTimeout(a,d[e])):n("opened")};return(e,u)=>(w(),I("div",{ref_key:"boxRef",ref:i,class:C(["giftbox",{[`step-${o.value}`]:o.value}]),onClick:v},ve,2))}});const pe=b(fe,[["__scopeId","data-v-6cde0240"]]),he=s=>(P("data-v-41792ad8"),s=s(),R(),s),me={class:"scratch"},we=he(()=>t("h1",null,"\u79B9\u6770\u724C\u522E\u522E\u6A02",-1)),ge={class:"canvas-container"},xe=y({__name:"Scratch",setup(s){const o=f(),d=f(),_=f(!1),v=a=>{if(!_.value)return;const u=d.value.getContext("2d"),h=a.offsetX,g=a.offsetY;u.beginPath(),u.arc(h,g,20,0,Math.PI*2),u.fill()};return A(()=>{const a=o.value;if(!a)return;const e=a.getContext("2d");e.font="16px Noto Sans TC",e.fillText("\u8ACB\u622A\u5716\u5B58\u8B49",150,320),e.fillText("\u5230\u79B9\u6770\u5E8A\u4E0A\u9818\u734E",150,340),e.fillText("10\u842C\u51FA\u570B\u723D\u5237",20,20),e.fillText("\u9CF3\u51F0\u96FB\u6CE2\u7121\u9650\u8D0A\u52A9",200,150),e.fillText("\u4E0B\u6B21\u642C\u5BB6\u5C31\u990A\u8C93\u8C93",60,500)}),A(()=>{const a=d.value;if(!a)return;const e=a.getContext("2d");e.fillStyle="silver",e.fillRect(0,0,360,600),e.globalCompositeOperation="destination-out"}),(a,e)=>(w(),I("div",me,[we,t("div",ge,[t("canvas",{ref_key:"bgCanvasRef",ref:o,width:360,height:600},null,512),t("canvas",{ref_key:"fgCanvasRef",ref:d,width:360,height:600,onPointerdown:e[0]||(e[0]=u=>_.value=!0),onPointerup:e[1]||(e[1]=u=>_.value=!1),onPointermove:v},null,544)])]))}});const Ce=b(xe,[["__scopeId","data-v-41792ad8"]]),ye=y({__name:"HomeView",setup(s){const n=f("card"),i=f(!1),o=f(!1),d=f(!1),_=()=>{i.value=!0,window.setTimeout(()=>{n.value="gift",window.setTimeout(()=>{o.value=!0},100)},1e3)},v=()=>{n.value="scratch",window.setTimeout(()=>{d.value=!0},100)};return(a,e)=>n.value==="card"?(w(),E(re,{key:0,class:C({hidden:i.value}),onShowGift:_},null,8,["class"])):n.value==="gift"?(w(),E(pe,{key:1,class:C({shown:o.value}),onOpened:v},null,8,["class"])):(w(),E(Ce,{key:2,class:C({shown:d.value})},null,8,["class"]))}});const $e=b(ye,[["__scopeId","data-v-b51bd25c"]]);export{$e as default};
